# Momentum Stratergy Backtest Project

## Project Description
This project implements and backtests a quantitative trading strategy on a list of Indian stocks (Nifty 500). The strategy is based on a combination of technical indicators including Moving Averages (DMA 20 and 50), ADX, ATR, and On-Balance Volume (OBV). The backtest simulates trades over a specified historical period, managing capital and tracking performance metrics.

## Setup Instructions
To run this backtest project, you need to have Python installed along with the necessary libraries.

### Prerequisites
- Python 3.6+
- pip (Python package installer)

### Installation
1. Clone or download the project files.
2. Navigate to the project directory in your terminal.
3. Install the required Python packages:
   ```bash
   pip install pandas numpy yfinance ta tqdm
   ```

### Running the Backtest
1. Ensure you have the `nifty_500.csv` file in the same directory as the notebook, or update the `csv_path` variable in the notebook to the correct location. This CSV should contain a column named 'Symbol' with the stock tickers.
2. Execute the Jupyter Notebook cells sequentially.
3. The script will download historical stock data, compute indicators, generate trade signals, simulate trades, and output results to CSV files (`nifty_backtest_trades.csv`, `nifty_backtest_summary.csv`, `date_wise_accounts.csv`).

## Trading Strategy
The trading strategy is a trend-following approach based on the following conditions:

### Indicators Used
- **DMA 20 & DMA 50:** Used to identify the short-term and medium-term trend direction.
- **ADX (Average Directional Index):** Measures the strength of the trend. A value above 25 typically indicates a strong trend.
- **+DI and -DI:** Components of ADX used to determine the direction of the trend.
- **ATR (Average True Range):** Measures market volatility, used for stop-loss calculation.
- **OBV (On-Balance Volume):** A cumulative volume indicator, used in conjunction with its moving average (OBV MA 20) to confirm trend strength by analyzing volume flow.

### Entry Conditions
A long position is considered when:
- The ADX is above 25 (indicating a strong trend).
- The DMA 20 is above the DMA 50 (confirming an upward trend).
- The closing price touches the DMA 20 (within a 0.5% tolerance).
- The OBV is above its 20-period moving average (confirming volume support for the trend).
- The +DI is above the -DI (confirming bullish momentum).

#### Pyramid Entry (Add-on Position)
If a position is already open, an additional position is considered when:
- The ADX is above 25.
- The DMA 20 is above the DMA 50.
- The closing price touches the DMA 50 (within a 0.5% tolerance).
- The OBV is above its 20-period moving average.
- The +DI is above the -DI.

### Exit Conditions
Positions are exited under the following conditions:
- **Stop Loss:** The closing price falls below the Stop Loss level, which is calculated as `DMA 50 - (ATR * 1.5)`.
- **Trend Change:** The DMA 20 crosses below the DMA 50, indicating a potential trend reversal.
- **End of Backtest:** Any remaining open positions are closed at the final closing price of the backtest period.

### Risk Management
- **Position Sizing:** Position size is determined based on a percentage of the maximum capital achieved so far. Specifically, it's calculated as `floor(0.02 * max_capital / entry_price)`.
- **Risk per Trade:** Each trade aims to risk 0.5% of the current total capital.
- **Risk-Reward Filter:** Only trades where the potential reward (based on the signal's exit price) is at least 1.5 times the potential risk (based on ATR) are considered for entry.
- **Maximum Open Positions:** The simulation limits the number of simultaneously open positions to 250.

## Backtest Results
After running the backtest, the results are saved in CSV files. The `nifty_backtest_summary.csv` provides an overview of the strategy's performance:

- **Start Capital:** The initial capital used for the backtest.
- **End Capital:** The final capital at the end of the backtest period.
- **Total PnL:** The total profit or loss generated by the strategy.
- **Trades:** The total number of executed trades.
- **Wins:** The number of winning trades.
- **Losses:** The number of losing trades.
- **Winrate:** The percentage of winning trades.
- **Sharpe Ratio:** A measure of risk-adjusted return.
- **Largest Loss Streak:** The maximum number of consecutive losing trades and their dates.

The `nifty_backtest_trades.csv` file contains a detailed log of each executed trade.

The `date_wise_accounts.csv` file tracks the total portfolio value and unallocated capital on each trading day.

## Conclusions and Future Work
[This section can be filled in after analyzing the backtest results. It could include insights into the strategy's performance, areas for improvement, potential optimizations, or further analysis.]

For example, potential future work could include:
- Optimizing indicator parameters.
- Exploring different position sizing techniques.
- Incorporating additional indicators or filters.
- Testing the strategy on different markets or timeframes.
- Adding transaction costs and slippage to the simulation.
# momentum-stratergy-backtest
